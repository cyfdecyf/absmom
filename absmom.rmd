---
title: "绝对动量策略投资指数基金收益分析"
author: "陈宇飞"
date: "2015年2月26日"
output: html_document
---

*绝对动量*策略从张翼轸 (SeekingBeta) 的[博客文章](http://seekingbeta.net/blog/html/y2013/277.html)看到，该策略名字听起来很高大上，本身其实非常简单。具体来说策略如下：

- 选定一个投资品种
- 确定观察周期，可以日、周、月为单位
- 每个观察周期最后一个交易日，将投资品种当前价格与回退 n 个周期时的价格相比
    - 若当前价格更高，则全仓买入或继续持有投资品种
    - 若当前价格更低，则全仓卖出

举例来说，假定投资品种为 50ETF，以周为单位，每周的最后一个交易日临近收盘时将当前的交易价格与 12 周前相比，若价格更高则买入或持有，若低则卖出。

这个策略简单易行，直观来看，能跟随单边上涨的趋势，同时避免单边下跌时较大幅度的回撤。从回测结果来看，将统计时间拉长，每个周期末回退的时间长一些，该策略能够跑赢指数。

对投资者来说，影响这个策略收益的最主要因素有几个：

- 观察周期
- 回退周期数，记作 lag
- 投资品种
- 投资时间，包括入场时间和总投资时间

本文接下来通过回测来验证绝对动量的有效性，并分析不同因素对该策略收益的影响。

# 绝对动量回测

下面对不同指数进行回测。指数的历史数据时间比对应的 ETF 更长，因此不用 ETF 的价格来回测。

## 上证指数

从通达信可以获得从 1990-12-19 日起到现在的上证指数，时间比较长，因此我们先对上证指数进行回测。由于空仓时资金也可以通过购买货基等方式获得收益，简单起见，假定空仓的收益为 3%。

从 1990 年开始到现在的每年收益结果如下，净值变化如图（结果过于夸张，难以置信）：

```{r, echo=FALSE}
suppressMessages(library(zoo))
suppressMessages(library(quantmod))
source('absmom.R')

# 假定空仓年化收益为 3%
r <- 0.03

szzs <- TDXStock('tdx/000001.xls')
ShowStrategy("上证指数", to.weekly(szzs), c(4, 12), 0.03*7/365, ylab.left = "指数点位")
```

如果从 2007 年 10 月上证指数最高点开始回测，结果如下：

```{r, echo=FALSE}
ShowStrategy("上证指数", to.weekly(szzs["2007-10/"]), c(4, 12), 0.03*7/365, ylab.left = "指数点位")
```

如果只看最近 10 年：

```{r, echo=FALSE}
ShowStrategy("上证指数", to.weekly(szzs["2005-09/"]), c(4, 12), 0.03*7/365, ylab.left = "指数点位")
```

## 上证 50

上证 50 指数 2004-01 开始到现在：

```{r, echo=FALSE}
sz50 <- TDXStock('tdx/000016.xls')
ShowStrategy("上证 50", to.weekly(sz50), c(4, 12), 0.03*7/365, ylab.left = "指数点位")
```

从 2007 年 10 月上证指数最高点开始回测，结果如下：

```{r, echo=FALSE}
ShowStrategy("上证 50", to.weekly(sz50["2007-10/"]), c(4, 12), 0.03*7/365, ylab.left = "指数点位")
```

## 沪深 300

沪深 300 指数 2005-04 开始到现在：

```{r, echo=FALSE}
hs300 <- TDXStock('tdx/000300.xls')
ShowStrategy("沪深 300", to.weekly(hs300), c(4, 12), 0.03*7/365, ylab.left = "指数点位")
```

从 2007 年 10 月上证指数最高点开始回测，结果如下：

```{r, echo=FALSE}
ShowStrategy("沪深 300", to.weekly(hs300["2007-10/"]), c(4, 12), 0.03*7/365, ylab.left = "指数点位")
```

## 国外股市的效果

TODO

# 为何有效

这个策略最怕震荡，但 A 股暴涨暴跌使得上涨阶段能够大幅获利，单边下跌时又能离场。

雷公资本：大多数时候我们赚得是趋势的钱。

大鳄：随上升趋势提高止损价，止损不止盈。

张岩的投资生活：随机选 30 支股票，收益很好。

## 与积极选股比较

2014 年 5 月入市开始到现在一年多时间，除少量股票交易之外，买过债券、可转债、ETF，大量交易分级 A。

决定自己对不同的 ETF 进行回测看收益如何。
